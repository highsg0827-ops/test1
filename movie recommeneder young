<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ê°„ë‹¨í•œ ì˜í™” ì¶”ì²œ ì‚¬ì´íŠ¸</title>
  <meta name="description" content="ê°„ë‹¨íˆ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì˜í™” ì¶”ì²œ ì›¹ í˜ì´ì§€. ê²€ìƒ‰, ì¥ë¥´ í•„í„°, ë¬´ì‘ìœ„ ì¶”ì²œ, ì¦ê²¨ì°¾ê¸° ì§€ì›" />
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--accent:#5eead4;--muted:#94a3b8;--glass: rgba(255,255,255,0.03)}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,'Helvetica Neue',Arial; background:linear-gradient(180deg,#071028 0%, #071a2b 60%);color:#e6eef6;min-height:100vh}
    header{display:flex;align-items:center;justify-content:space-between;padding:18px 24px;border-bottom:1px solid rgba(255,255,255,0.04)}
    .logo{display:flex;gap:12px;align-items:center}
    .logo .mark{width:44px;height:44px;border-radius:8px;background:linear-gradient(135deg,var(--accent),#60a5fa);display:flex;align-items:center;justify-content:center;font-weight:700;color:#012;box-shadow:0 6px 18px rgba(2,6,23,0.6)}
    h1{font-size:18px;margin:0}
    p.lead{margin:0;color:var(--muted);font-size:13px}

    .controls{display:flex;gap:12px;align-items:center;padding:16px 24px}
    .search{flex:1;display:flex;gap:8px}
    input[type=text],select{background:var(--card);border:1px solid rgba(255,255,255,0.04);padding:10px 12px;border-radius:10px;color:inherit;outline:none;min-width:0}
    button{background:linear-gradient(90deg,#2dd4bf,#60a5fa);border:none;padding:10px 14px;border-radius:10px;color:#012;font-weight:600;cursor:pointer}
    button.secondary{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted)}

    main{padding:20px 24px}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:16px}
    .card{background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);backdrop-filter:blur(6px)}
    .poster{height:300px;border-radius:8px;background-size:cover;background-position:center;margin-bottom:10px}
    .meta{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
    .title{font-size:15px;font-weight:700}
    .sub{font-size:12px;color:var(--muted)}
    .actions{display:flex;gap:8px}
    .chip{padding:6px 8px;border-radius:999px;background:var(--glass);font-size:12px;color:var(--muted)}

    .footer{padding:18px 24px;color:var(--muted);font-size:13px;border-top:1px solid rgba(255,255,255,0.03)}

    /* modal */
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;padding:20px}
    .modal.open{display:flex}
    .modal .sheet{width:100%;max-width:900px;background:#051428;padding:18px;border-radius:12px;border:1px solid rgba(255,255,255,0.04)}
    .row{display:flex;gap:16px}
    .sheet .poster{height:360px;flex:0 0 240px}
    .sheet .info{flex:1}
    .rating{font-weight:700;color:var(--accent)}

    @media(max-width:720px){.row{flex-direction:column}.sheet .poster{height:260px;width:100%;flex:auto}}

    /* small helper */
    .empty{padding:40px;text-align:center;color:var(--muted)}
    a.link{color:var(--accent);text-decoration:none}
  </style>
</head>
<body>
  <header>
    <div class="logo">
      <div class="mark">MR</div>
      <div>
        <h1>Movie Recommender</h1>
        <p class="lead">ê°„ë‹¨í•œ ì˜í™” ê²€ìƒ‰ Â· í•„í„° Â· ì¶”ì²œ ë°ëª¨</p>
      </div>
    </div>
    <div style="display:flex;gap:8px;align-items:center">
      <button id="randomBtn">ë¬´ì‘ìœ„ ì¶”ì²œ ğŸ²</button>
      <button class="secondary" id="showFav">ì¦ê²¨ì°¾ê¸° â¤ï¸ <span id="favCount">0</span></button>
    </div>
  </header>

  <div class="controls">
    <div class="search">
      <input id="q" type="text" placeholder="ì œëª©ìœ¼ë¡œ ê²€ìƒ‰ (ì˜ˆ: ê¸°ìƒì¶©)" />
      <select id="genre">
        <option value="all">ëª¨ë“  ì¥ë¥´</option>
      </select>
      <select id="sort">
        <option value="default">ì •ë ¬: ê¸°ë³¸</option>
        <option value="rating">í‰ì  ë†’ì€ ìˆœ</option>
        <option value="year">ê°œë´‰ì—°ë„ ìµœì‹ ìˆœ</option>
      </select>
    </div>
    <button id="clear">ì´ˆê¸°í™”</button>
  </div>

  <main>
    <div id="grid" class="grid"></div>
    <div id="empty" class="empty" style="display:none">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</div>
  </main>

  <div class="footer">ì´ íŒŒì¼ì„ <strong>index.html</strong>ë¡œ ì €ì¥í•˜ê³  ê¹ƒí—ˆë¸Œ ë¦¬í¬ì§€í† ë¦¬ì— ì˜¬ë¦¬ë©´ GitHub Pagesë¡œ ë°°í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (root ë˜ëŠ” gh-pages ë¸Œëœì¹˜)</div>

  <!-- Modal -->
  <div id="modal" class="modal" role="dialog" aria-hidden="true">
    <div class="sheet" role="document">
      <div style="display:flex;justify-content:flex-end"><button id="closeModal" class="secondary">ë‹«ê¸°</button></div>
      <div class="row">
        <div id="modalPoster" class="poster" style="background-image:url('')"></div>
        <div class="info">
          <h2 id="modalTitle"></h2>
          <div class="sub">ê°œë´‰: <span id="modalYear"></span> Â· ì¥ë¥´: <span id="modalGenre"></span> Â· í‰ì : <span id="modalRating" class="rating"></span></div>
          <p id="modalDesc" style="margin-top:12px;color:var(--muted)"></p>
          <div style="margin-top:12px;display:flex;gap:8px">
            <button id="favToggle">ì¦ê²¨ì°¾ê¸° ì¶”ê°€</button>
            <a id="imdbLink" class="link" href="#" target="_blank" rel="noreferrer">IMDBì—ì„œ ë³´ê¸°</a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ê°„ë‹¨í•œ ë¡œì»¬ ë°ì´í„°: í•„ìš”í•˜ë©´ ì¶”ê°€í•˜ê±°ë‚˜ êµì²´í•˜ì„¸ìš”.
    const MOVIES = [
      {id:1,title:'ì£¼í† í”¼ì•„',year:2019,genre:['ì• ë‹ˆë©”ì´ì…˜','ëª¨í—˜'],rating:8.6,poster:'https://picsum.photos/seed/parasite/600/900',desc:'í˜¼ë€ì— ë¹ ì§„ ë„ì‹œë¥¼ êµ¬í•˜ê¸° ìœ„í•œ ì£¼ë””ì™€ ë‹‰ì˜ ì¶”ì  ì–´ë“œë²¤ì²˜' ,imdb:'https://www.imdb.com/title/tt6751668/'},
      {id:2,title:'ì¸ì…‰ì…˜',year:2010,genre:['SF','ìŠ¤ë¦´ëŸ¬'],rating:8.8,poster:'https://picsum.photos/seed/inception/600/900',desc:'ê¿ˆ ì†ì˜ ê¿ˆì„ ë¬´ëŒ€ë¡œ í¼ì³ì§€ëŠ” ë¸”ë¡ë²„ìŠ¤í„° ì‹¬ë¦¬ ìŠ¤ë¦´ëŸ¬.' ,imdb:'https://www.imdb.com/title/tt1375666/'},
      {id:3,title:'ë…¸íŒ… í',year:1999,genre:['ë¡œë§¨ìŠ¤','ì½”ë¯¸ë””'],rating:7.1,poster:'https://picsum.photos/seed/notting/600/900',desc:'ì„œì  ì£¼ì¸ê³¼ ìœ ëª… ì—¬ë°°ìš°ì˜ ì‚¬ë‘ì„ ê·¸ë¦° ë¡œë§¨í‹± ì½”ë¯¸ë””.' ,imdb:'https://www.imdb.com/title/tt0125439/'},
      {id:4,title:'ì‰°ë“¤ëŸ¬ ë¦¬ìŠ¤íŠ¸',year:1993,genre:['ë“œë¼ë§ˆ','ì—­ì‚¬'],rating:8.9,poster:'https://picsum.photos/seed/schindler/600/900',desc:'ë‚˜ì¹˜ ì¹˜í•˜ ìœ ëŒ€ì¸ ë…¸ë™ìë¥¼ êµ¬í•œ ì‹¤ì¡´ ì¸ë¬¼ì˜ ì´ì•¼ê¸°.' ,imdb:'https://www.imdb.com/title/tt0108052/'},
      {id:5,title:'ì¸í„°ìŠ¤í…”ë¼',year:2014,genre:['SF','ë“œë¼ë§ˆ'],rating:8.6,poster:'https://picsum.photos/seed/interstellar/600/900',desc:'ì¸ë¥˜ì˜ ìƒì¡´ì„ ê±´ ìš°ì£¼ íƒì‚¬ì™€ ì‹œê°„ì˜ ìƒëŒ€ì„±ì— ê´€í•œ ì„œì‚¬.' ,imdb:'https://www.imdb.com/title/tt0816692/'},
      {id:6,title:'ì†Œìš¸',year:2020,genre:['ì• ë‹ˆë©”ì´ì…˜','ë“œë¼ë§ˆ'],rating:8.1,poster:'https://picsum.photos/seed/soul/600/900',desc:'ì‚¶ì˜ ì˜ë¯¸ì™€ ì—´ì •ì„ ì°¾ì•„ê°€ëŠ” ìŒì•…ê°€ì˜ ì˜í˜¼ ì—¬í–‰.' ,imdb:'https://www.imdb.com/title/tt2948372/'},
      {id:7,title:'ì–´ë²¤ì ¸ìŠ¤: ì—”ë“œê²Œì„',year:2019,genre:['ì•¡ì…˜','SF'],rating:8.4,poster:'https://picsum.photos/seed/avengers/600/900',desc:'íˆì–´ë¡œë“¤ì´ í˜ì„ í•©ì³ ìš°ì£¼ì  ìœ„í˜‘ì— ë§ì„œëŠ” ëŒ€ì„œì‚¬ì‹œ.' ,imdb:'https://www.imdb.com/title/tt4154796/'},
      {id:8,title:'ì‡¼ìƒí¬ íƒˆì¶œ',year:1994,genre:['ë“œë¼ë§ˆ','ë²”ì£„'],rating:9.3,poster:'https://picsum.photos/seed/shawshank/600/900',desc:'ë¶€ë‹¹í•œ ìˆ˜ê°ìƒí™œ ì†ì—ì„œë„ í¬ë§ì„ ìƒì§€ ì•ŠëŠ” ì´ì•¼ê¸°.' ,imdb:'https://www.imdb.com/title/tt0111161/'},
      {id:9,title:'ë¼ë¼ëœë“œ',year:2016,genre:['ë®¤ì§€ì»¬','ë¡œë§¨ìŠ¤'],rating:8.0,poster:'https://picsum.photos/seed/lalaland/600/900',desc:'ë‚­ë§Œê³¼ í˜„ì‹¤ ì‚¬ì´ì—ì„œ ê°ˆë“±í•˜ëŠ” ë‘ ì˜ˆìˆ ê°€ì˜ ì‚¬ë‘ ì´ì•¼ê¸°.' ,imdb:'https://www.imdb.com/title/tt3783958/'},
      {id:10,title:'ê¸°ì–µì˜ ë°¤',year:2017,genre:['ìŠ¤ë¦´ëŸ¬','ë¯¸ìŠ¤í„°ë¦¬'],rating:6.6,poster:'https://picsum.photos/seed/memory/600/900',desc:'ê³¼ê±°ì˜ íŠ¸ë¼ìš°ë§ˆì™€ ì‚¬ê±´ì„ ì¶”ì í•˜ëŠ” ì„œìŠ¤íœìŠ¤ ìŠ¤ë¦´ëŸ¬.' ,imdb:'#'}
    ];

    // state
    let state = {q:'',genre:'all',sort:'default',favorites:[],showingFav:false};

    // elements
    const grid = document.getElementById('grid');
    const qInput = document.getElementById('q');
    const genreSelect = document.getElementById('genre');
    const sortSelect = document.getElementById('sort');
    const emptyBox = document.getElementById('empty');
    const randomBtn = document.getElementById('randomBtn');
    const modal = document.getElementById('modal');
    const modalPoster = document.getElementById('modalPoster');
    const modalTitle = document.getElementById('modalTitle');
    const modalYear = document.getElementById('modalYear');
    const modalGenre = document.getElementById('modalGenre');
    const modalRating = document.getElementById('modalRating');
    const modalDesc = document.getElementById('modalDesc');
    const favToggle = document.getElementById('favToggle');
    const imdbLink = document.getElementById('imdbLink');
    const closeModal = document.getElementById('closeModal');
    const clearBtn = document.getElementById('clear');
    const showFavBtn = document.getElementById('showFav');
    const favCount = document.getElementById('favCount');

    // initialize
    function init(){
      // populate genre options
      const genres = new Set(); MOVIES.forEach(m=>m.genre.forEach(g=>genres.add(g)));
      Array.from(genres).sort().forEach(g=>{
        const opt = document.createElement('option'); opt.value = g; opt.textContent = g; genreSelect.appendChild(opt);
      });

      // load favorites from localStorage
      const saved = localStorage.getItem('mr_favs');
      if(saved){ try{ state.favorites = JSON.parse(saved) }catch(e){ state.favorites=[] }}
      updateFavCount();

      bind();
      render();
    }

    function bind(){
      qInput.addEventListener('input',e=>{state.q=e.target.value; render()});
      genreSelect.addEventListener('change',e=>{state.genre=e.target.value; render()});
      sortSelect.addEventListener('change',e=>{state.sort=e.target.value; render()});
      randomBtn.addEventListener('click',randomRecommend);
      closeModal.addEventListener('click',()=>close());
      modal.addEventListener('click', (e)=>{ if(e.target===modal) close(); });
      clearBtn.addEventListener('click',()=>{ qInput.value='';genreSelect.value='all';sortSelect.value='default';state={...state,q:'',genre:'all',sort:'default',favorites:state.favorites,showingFav:false}; render(); });
      showFavBtn.addEventListener('click',()=>{ state.showingFav = !state.showingFav; showFavBtn.classList.toggle('secondary',state.showingFav); render(); });
      favToggle.addEventListener('click',toggleFavFromModal);
    }

    function filterAndSort(list){
      let res = list.filter(m=>{
        if(state.showingFav && !state.favorites.includes(m.id)) return false;
        if(state.genre!=='all' && !m.genre.includes(state.genre)) return false;
        if(state.q && !m.title.toLowerCase().includes(state.q.trim().toLowerCase())) return false;
        return true;
      });
      if(state.sort==='rating') res.sort((a,b)=>b.rating - a.rating);
      if(state.sort==='year') res.sort((a,b)=>b.year - a.year);
      return res;
    }

    function render(){
      const list = filterAndSort(MOVIES);
      grid.innerHTML='';
      if(list.length===0){ emptyBox.style.display='block'; return } else emptyBox.style.display='none';
      list.forEach(m=>{
        const card = document.createElement('div'); card.className='card';
        const poster = document.createElement('div'); poster.className='poster'; poster.style.backgroundImage = `url('${m.poster}')`;
        const meta = document.createElement('div'); meta.className='meta';
        const t = document.createElement('div'); t.innerHTML = `<div class="title">${m.title}</div><div class="sub">${m.year} Â· ${m.genre.join(', ')}</div>`;
        const act = document.createElement('div'); act.className='actions';
        const r = document.createElement('div'); r.className='chip'; r.textContent = `â˜… ${m.rating}`;
        const btn = document.createElement('button'); btn.textContent='ìƒì„¸'; btn.addEventListener('click',()=>openModal(m.id));
        const fav = document.createElement('button'); fav.textContent = state.favorites.includes(m.id) ? 'â™¥' : 'â™¡'; fav.title='ì¦ê²¨ì°¾ê¸°'; fav.addEventListener('click',()=>toggleFav(m.id, fav));
        act.appendChild(r); act.appendChild(btn); act.appendChild(fav);
        meta.appendChild(t); meta.appendChild(act);
        card.appendChild(poster); card.appendChild(meta);
        grid.appendChild(card);
      });
    }

    function openModal(id){
      const m = MOVIES.find(x=>x.id===id); if(!m) return;
      modalPoster.style.backgroundImage = `url('${m.poster}')`;
      modalTitle.textContent = m.title;
      modalYear.textContent = m.year;
      modalGenre.textContent = m.genre.join(', ');
      modalRating.textContent = m.rating;
      modalDesc.textContent = m.desc;
      imdbLink.href = m.imdb || '#';
      favToggle.textContent = state.favorites.includes(m.id) ? 'ì¦ê²¨ì°¾ê¸° ì œê±°' : 'ì¦ê²¨ì°¾ê¸° ì¶”ê°€';
      favToggle.dataset.id = m.id;
      modal.classList.add('open'); modal.setAttribute('aria-hidden','false');
    }
    function close(){ modal.classList.remove('open'); modal.setAttribute('aria-hidden','true'); }

    function randomRecommend(){
      const list = filterAndSort(MOVIES);
      if(list.length===0){ alert('ì¡°ê±´ì— ë§ëŠ” ì˜í™”ê°€ ì—†ìŠµë‹ˆë‹¤. í•„í„°ë¥¼ ì´ˆê¸°í™” í•´ë³´ì„¸ìš”.'); return }
      const choice = list[Math.floor(Math.random() * list.length)];
      openModal(choice.id);
    }

    function toggleFav(id, btnEl){
      if(state.favorites.includes(id)){
        state.favorites = state.favorites.filter(x=>x!==id);
        if(btnEl) btnEl.textContent='â™¡';
      } else { state.favorites.push(id); if(btnEl) btnEl.textContent='â™¥' }
      localStorage.setItem('mr_favs', JSON.stringify(state.favorites));
      updateFavCount();
      render();
    }
    function toggleFavFromModal(){ const id = Number(favToggle.dataset.id); toggleFav(id); favToggle.textContent = state.favorites.includes(id) ? 'ì¦ê²¨ì°¾ê¸° ì œê±°' : 'ì¦ê²¨ì°¾ê¸° ì¶”ê°€'; }

    function updateFavCount(){ favCount.textContent = state.favorites.length }

    // ë¹ ë¥¸ ì‚¬ìš©ì„ ìœ„í•´ ì´ˆê¸° ì‹¤í–‰
    init();
  </script>
</body>
</html>
