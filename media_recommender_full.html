<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Movie Recommender — Modern Black & Gold (Final)</title>
  <meta name="description" content="영화 · 드라마 · 애니메이션을 분류하는 모던 블랙&골드 테마의 추천 페이지" />
  <style>
    :root{--bg:#0b0b0b;--card:#0f1113;--muted:#9aa3a8;--gold:#d4af37;--glass:rgba(255,255,255,0.03)}
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial; color:#e9eef6;background:linear-gradient(180deg,#080808 0%, #0f0f10 100%)}
    .wrap{max-width:1100px;margin:28px auto;padding:20px}
    header{display:flex;align-items:center;justify-content:space-between;gap:16px}
    .brand{display:flex;gap:14px;align-items:center}
    .logo{
  width:56px;
  height:56px;
  border-radius:12px;
  background:linear-gradient(135deg,#b89c3a,#d2b55b);
  display:flex;
  align-items:center;
  justify-content:center;
  color:#000;
  font-weight:800;
  font-size:28px;
  box-shadow:0 8px 30px rgba(0,0,0,0.55);
}
    h1{margin:0;font-size:20px}
    p.lead{margin:0;color:var(--muted);font-size:13px}

    .controls{display:flex;gap:12px;align-items:center;margin-top:18px}
    .search{display:flex;gap:10px;flex:1}
    input[type=text],select{background:var(--card);border:1px solid rgba(255,255,255,0.04);padding:10px 12px;border-radius:10px;color:inherit;outline:none;min-width:0}
    button{background:linear-gradient(90deg,var(--gold),#f3d77a);border:none;padding:10px 14px;border-radius:10px;color:#081018;font-weight:700;cursor:pointer}
    button.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted);font-weight:600}

    .meta-row{display:flex;gap:12px;align-items:center;margin-top:14px;justify-content:space-between}
    .fav-counter{color:var(--muted);font-size:14px}

    main{margin-top:18px}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:18px}
    .card{background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);backdrop-filter:blur(6px);position:relative;overflow:hidden;transition:transform .18s ease, box-shadow .18s ease}
    .card:hover{transform:translateY(-6px);box-shadow:0 18px 40px rgba(0,0,0,0.6)}
    .poster{height:300px;border-radius:8px;background-size:cover;background-position:center;margin-bottom:12px}
    .title{font-size:16px;font-weight:700;margin-bottom:6px}
    .sub{font-size:13px;color:var(--muted);display:flex;justify-content:space-between;align-items:center}
    .chip{padding:6px 10px;border-radius:999px;background:var(--glass);font-size:12px;color:var(--muted);}

    .heart{position:absolute;top:12px;right:12px;background:rgba(0,0,0,0.45);border:1px solid rgba(255,255,255,0.04);width:40px;height:40px;border-radius:10px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:18px}
    .heart.active{background:linear-gradient(90deg,#ff6b6b,#ff9472);color:#081018}

    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;padding:20px;background:linear-gradient(180deg,rgba(0,0,0,0.6),rgba(0,0,0,0.7))}
    .modal.open{display:flex}
    .sheet{width:100%;max-width:960px;background:linear-gradient(180deg,#0b0b0b,#0f1113);border-radius:12px;padding:18px;border:1px solid rgba(255,255,255,0.04);display:flex;gap:18px}
    .sheet .left{flex:0 0 320px}
    .sheet .left .poster{height:440px}
    .sheet .right{flex:1;color:#dbe6ef}
    .right h2{margin:0 0 6px}
    .meta{color:var(--muted);margin-bottom:12px}
    .rating{font-weight:800;color:var(--gold)}
    .stream-links a{display:inline-block;margin-right:8px;margin-top:8px;padding:8px 10px;border-radius:8px;background:#081018;color:var(--gold);text-decoration:none;border:1px solid rgba(255,255,255,0.03)}
    .close-btn{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted);padding:8px 10px;border-radius:8px;cursor:pointer}

    footer{margin-top:22px;color:var(--muted);font-size:13px;text-align:center}

    @media(max-width:880px){.sheet{flex-direction:column}.sheet .left .poster{height:320px}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo">M</div>
        <div>
          <h1>Media Recommender</h1>
          <p class="lead">영화 · 드라마 · 애니메이션 추천</p>
        </div>
      </div>
      <div style="text-align:right">
        <div class="fav-counter">즐겨찾기: <strong id="favCount">0</strong></div>
      </div>
    </header>

    <div class="controls">
      <div class="search">
        <input id="q" type="text" placeholder="제목 검색" />
        <select id="type">
          <option value="all">전체</option>
          <option value="movie">영화</option>
          <option value="drama">드라마</option>
          <option value="anime">애니메이션</option>
        </select>
        <select id="genre"><option value="all">모든 장르</option></select>
        <select id="sort">
          <option value="default">정렬: 기본</option>
          <option value="rating">평점 높은 순</option>
          <option value="year">최신순</option>
        </select>
      </div>
      <div style="display:flex;gap:8px">
        <button id="randomBtn">무작위 추천</button>
        <button id="resetBtn" class="ghost">초기화</button>
        <button id="showFav" class="ghost">즐겨찾기만</button>
      </div>
    </div>

    <div class="meta-row">
      <div style="color:var(--muted)">총 항목 수: <span id="totalCount">0</span></div>
      <div style="color:var(--muted);font-size:13px">카드를 눌러 상세보기 가능</div>
    </div>

    <main>
      <div id="grid" class="grid"></div>
      <div id="empty" style="display:none;padding:40px;text-align:center;color:var(--muted)">검색 결과 없음</div>
    </main>
  </div>

  <!-- Modal -->
  <div id="modal" class="modal" aria-hidden="true">
    <div class="sheet" role="dialog" aria-modal="true">
      <div class="left">
        <div id="modalPoster" class="poster" style="background-image:url('')"></div>
      </div>
      <div class="right">
        <div style="display:flex;justify-content:space-between;gap:12px;align-items:center">
          <div>
            <h2 id="modalTitle">Title</h2>
            <div class="meta"><span id="modalYear"></span> · <span id="modalGenre"></span></div>
          </div>
          <div style="text-align:right">
            <div class="rating" id="modalRating">★ 0</div>
            <button id="modalFav" class="close-btn">즐겨찾기</button>
          </div>
        </div>
        <p id="modalDesc" style="color:var(--muted);margin-top:12px"></p>

        <h3 style="margin-top:14px;margin-bottom:6px">비평가 리뷰</h3>
        <p id="criticsBox" style="color:#cbd6dd"></p>

        <h3 style="margin-top:12px;margin-bottom:6px">관객 리뷰 · 별점</h3>
        <p id="audienceBox" style="color:#cbd6dd"></p>

        <h3 style="margin-top:12px;margin-bottom:6px">볼 수 있는 서비스</h3>
        <div id="streamBox" class="stream-links"></div>

        <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:18px">
          <a id="imdbLink" class="stream-links" href="#" target="_blank" rel="noreferrer" style="color:var(--muted);text-decoration:underline">IMDb 페이지</a>
          <button id="closeModal" class="close-btn">닫기</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // 데이터
    const MOVIES = [
      {id:1,type:'movie',title:'기생충  ',year:2019,genre:['드라마','스릴러'],rating:8.6,critics:'사회 계층을 정교하게 다뤘다는 평가.',audience:'반전 전개가 호평.',audienceStar:4.7,stream:[{name:'넷플릭스',url:'https://www.netflix.com'},{name:'웨이브',url:'https://www.wavve.com'}],poster:'https://image.tmdb.org/t/p/w500/7IiTTgloJzvGI1TAYymCfbfl3vT.jpg',desc:'가난한 가족과 부유층 사이의 충돌.',imdb:'https://www.imdb.com/title/tt6751668/'},
      {id:2,type:'movie',title:'인셉션',year:2010,genre:['SF','스릴러'],rating:8.8,critics:'정교한 플롯으로 극찬.',audience:'난이도 있지만 흥미롭다는 반응.',audienceStar:4.6,stream:[{name:'Prime Video',url:'https://www.primevideo.com'}],poster:'https://image.tmdb.org/t/p/w500/edv5CZvWj09upOsy2Y6IwDhK8bt.jpg',desc:'꿈 속 세계에서 미션 수행.',imdb:'https://www.imdb.com/title/tt1375666/'},
      {id:3,type:'movie',title:'인터스텔라',year:2014,genre:['SF','드라마'],rating:8.6,critics:'과학·감성 균형이 뛰어나다는 평가.',audience:'감동적인 가족서사.',audienceStar:4.6,stream:[{name:'Prime Video',url:'https://www.primevideo.com'}],poster:'https://image.tmdb.org/t/p/w500/rAiYTfKGqDCRIIqo664sY9XZIvQ.jpg',desc:'인류 생존을 위한 우주 탐사.',imdb:'https://www.imdb.com/title/tt0816692/'},
      {id:4,type:'movie',title:'쇼생크 탈출',year:1994,genre:['드라마'],rating:9.3,critics:'희망을 그린 명작.',audience:'엔딩이 감동적.',audienceStar:4.8,stream:[{name:'넷플릭스',url:'https://www.netflix.com'}],poster:'https://image.tmdb.org/t/p/w500/q6y0Go1tsGEsmtFryDOJo3dEmqu.jpg',desc:'억울한 수감자의 탈출기.',imdb:'https://www.imdb.com/title/tt0111161/'},
      {id:5,type:'movie',title:'다크 나이트',year:2008,genre:['액션','범죄'],rating:9.0,critics:'히스 레저의 조커가 압도적.',audience:'최고의 히어로 영화 중 하나.',audienceStar:4.7,stream:[{name:'웨이브',url:'https://www.wavve.com'}],poster:'https://image.tmdb.org/t/p/w500/qJ2tW6WMUDux911r6m7haRef0WH.jpg',desc:'배트맨과 조커의 충돌.',imdb:'https://www.imdb.com/title/tt0468569/'},

      {id:101,type:'drama',title:'브레이킹 배드',year:2008,genre:['범죄','드라마'],rating:9.5,critics:'완성도 높은 캐릭터 구축과 전개로 극찬.',audience:'몰입도가 최고.',audienceStar:4.9,stream:[{name:'넷플릭스',url:'https://www.netflix.com'}],poster:'https://image.tmdb.org/t/p/w500/ggFHVNu6YYI5L9pCfOacjizRGt.jpg',desc:'평범한 교사가 마약 제조에 뛰어든다.',imdb:'https://www.imdb.com/title/tt0903747/'},
      {id:102,type:'drama',title:'체르노빌',year:2019,genre:['역사','드라마'],rating:9.4,critics:'사실 재현과 연출이 뛰어남.',audience:'묵직한 여운.',audienceStar:4.8,stream:[{name:'HBO',url:'https://www.hbo.com'}],poster:'https://image.tmdb.org/t/p/w500/hlLXt2tOPT6RRnjiUmoxyG1LTFi.jpg',desc:'체르노빌 원전 사고 재구성.',imdb:'https://www.imdb.com/title/tt7366338/'},
      {id:103,type:'drama',title:'왕좌의 게임',year:2011,genre:['판타지','드라마'],rating:9.2,critics:'방대한 서사와 연출력.',audience:'초중반 명작 평가.',audienceStar:4.6,stream:[{name:'HBO',url:'https://www.hbo.com'}],poster:'https://image.tmdb.org/t/p/w500/u3bZgnGQ9T01sWNhyveQz0wH0Hl.jpg',desc:'여러 가문 간 권력 싸움.',imdb:'https://www.imdb.com/title/tt0944947/'},
      {id:104,type:'drama',title:'오징어 게임',year:2021,genre:['스릴러','드라마'],rating:8.0,critics:'사회적 메시지를 담았다.',audience:'강렬한 전개.',audienceStar:4.3,stream:[{name:'넷플릭스',url:'https://www.netflix.com'}],poster:'https://i.namu.wiki/i/5mgU3I4UjpKNsiy_04-Eyr-ybKp7RZfkrIocJ1uCccUV8kbvr4iwtKqURcE_60YLN_Cosoqn7BcfFbyxSfQdDz19HBWGleNIkgL9Encf6M5qEihqgYWMQ0R-figY23WmrNw5UBTFVr_f5m8zNXL6Hg.webp',desc:'생존 게임에 참가한 사람들의 이야기.',imdb:'https://www.imdb.com/title/tt10919420/'},
      {id:105,type:'drama',title:'나르코스',year:2015,genre:['범죄','드라마'],rating:8.8,critics:'실화 기반 강렬한 전개.',audience:'현실감 넘친다는 평.',audienceStar:4.5,stream:[{name:'넷플릭스',url:'https://www.netflix.com'}],poster:'https://i.namu.wiki/i/h42H1htB2F3yehukjQzvxKe6JeKRnQ00rG1vQ_064Wq0sIhkSdEBec1cR3oHnjZLToHKAhDWq-NgvSGqur-kNA.webp',desc:'마약 조직의 rise and fall.',imdb:'https://www.imdb.com/title/tt2707408/'},

      {id:201,type:'anime',title:'귀멸의 칼날',year:2019,genre:['액션','판타지'],rating:8.7,critics:'작화와 연출이 뛰어남.',audience:'감동적 전개.',audienceStar:4.6,stream:[{name:'Prime Video',url:'https://www.primevideo.com'}],poster:'https://i.namu.wiki/i/Ex-fqdmaEJrrB8XB4cLcoUM55RSAhNL0Sef-68omavP3JqxhMyNt9FsbLP-Q_pLm7vgC9V37Bdec72uXAxTuyg.webp',desc:'가족을 잃은 소년의 복수 여정.',imdb:'#'},
      {id:202,type:'anime',title:'진격의 거인',year:2013,genre:['액션','판타지'],rating:9.0,critics:'압도적 세계관과 전개.',audience:'충격적 전개로 유명.',audienceStar:4.8,stream:[{name:'넷플릭스',url:'https://www.netflix.com'}],poster:'https://i.namu.wiki/i/CIiqc-_mUV31oIqzXrESFDQunLiaRB1ZizGGVda5qRqVhwtVL_Di6Fz7XjLdcoHlryjS1ZyibAO3Fj5FzDUWDQ.webp',desc:'거인과 인간의 전쟁.',imdb:'#'},
      {id:203,type:'anime',title:'너의 이름은',year:2016,genre:['로맨스','애니메이션'],rating:8.4,critics:'영상미와 감성으로 호평.',audience:'OST가 유명.',audienceStar:4.7,stream:[{name:'넷플릭스',url:'https://www.netflix.com'}],poster:'https://image.tmdb.org/t/p/w500/q719jXXEzOoYaps6babgKnONONX.jpg',desc:'서로의 몸이 바뀌는 신비한 이야기.',imdb:'https://www.imdb.com/title/tt5311514/'},
      {id:204,type:'anime',title:'하이큐',year:2014,genre:['스포츠','애니메이션'],rating:8.7,critics:'열정적 연출과 팀워크 묘사.',audience:'응원하게 만드는 전개.',audienceStar:4.6,stream:[{name:'Prime Video',url:'https://www.primevideo.com'}],poster:'https://i.namu.wiki/i/kAQn-EsXiAt1mhFcfIFqNljZFJPngKlizeeDcKuzj4Xgz2sWTdi7T8eAYwvdRg8Bi6JSj7ylQv3-hmlIGii7Vw.webp',desc:'배구 소년들의 성장 이야기.',imdb:'#'},
      {id:205,type:'anime',title:'원펀맨',year:2015,genre:['액션','코미디'],rating:8.7,critics:'비범한 히어로 패러디와 연출.',audience:'유쾌한 전개.',audienceStar:4.5,stream:[{name:'넷플릭스',url:'https://www.netflix.com'}],poster:'https://i.namu.wiki/i/Uu2YDFFnBy2JkKYs1oeOxdzzcnXJhcnuNy2ecxYF9RGCVGyCu1XftFsHLOlbsW8OX3Ch2NhMhcRB6qteKhXHXQ.webp',desc:'최강 히어로의 소소한 일상.',imdb:'#'}
    ];

    // 상태
    let state = {q:'',type:'all',genre:'all',sort:'default',favorites:[],showingFav:false};

    // dom
    const grid = document.getElementById('grid');
    const qInput = document.getElementById('q');
    const typeSelect = document.getElementById('type');
    const genreSelect = document.getElementById('genre');
    const sortSelect = document.getElementById('sort');
    const emptyBox = document.getElementById('empty');
    const favCount = document.getElementById('favCount');
    const totalCount = document.getElementById('totalCount');

    const modal = document.getElementById('modal');
    const modalPoster = document.getElementById('modalPoster');
    const modalTitle = document.getElementById('modalTitle');
    const modalYear = document.getElementById('modalYear');
    const modalGenre = document.getElementById('modalGenre');
    const modalRating = document.getElementById('modalRating');
    const modalDesc = document.getElementById('modalDesc');
    const criticsBox = document.getElementById('criticsBox');
    const audienceBox = document.getElementById('audienceBox');
    const streamBox = document.getElementById('streamBox');
    const imdbLink = document.getElementById('imdbLink');
    const modalFav = document.getElementById('modalFav');

    // 로컬스토리지
    function loadFavs(){
      try{ const s = localStorage.getItem('mr_favs'); state.favorites = s?JSON.parse(s):[] }catch(e){ state.favorites=[] }
      updateFavUI();
    }
    function saveFavs(){ localStorage.setItem('mr_favs', JSON.stringify(state.favorites)); updateFavUI(); }
    function updateFavUI(){ favCount.textContent = state.favorites.length; }

    // 장르 채우기
    function populateGenres(){
      const genres = [...new Set(MOVIES.flatMap(m=>m.genre))].sort();
      genres.forEach(g=>{ const opt=document.createElement('option'); opt.value=g; opt.textContent=g; genreSelect.appendChild(opt); });
    }

    // 필터 & 정렬
    function filterAndSort(list){
      let res = list.filter(m=>{
        if(state.showingFav && !state.favorites.includes(m.id)) return false;
        if(state.type!=='all' && m.type!==state.type) return false;
        if(state.genre!=='all' && !m.genre.includes(state.genre)) return false;
        if(state.q && !m.title.toLowerCase().includes(state.q.trim().toLowerCase())) return false;
        return true;
      });
      if(state.sort==='rating') res.sort((a,b)=>b.rating - a.rating);
      if(state.sort==='year') res.sort((a,b)=>b.year - a.year);
      return res;
    }

    // 렌더
    function render(){
      const list = filterAndSort(MOVIES);
      totalCount.textContent = MOVIES.length;
      grid.innerHTML='';
      if(list.length===0){ emptyBox.style.display='block'; return } else emptyBox.style.display='none';

      list.forEach(m=>{
        const card = document.createElement('div'); card.className='card';
        const heart = document.createElement('button'); heart.className='heart'; heart.innerHTML = state.favorites.includes(m.id)?'♥':'♡';
        if(state.favorites.includes(m.id)) heart.classList.add('active');
        heart.onclick = (e)=>{ e.stopPropagation(); toggleFav(m.id, heart); };

        const poster = document.createElement('div'); poster.className='poster'; poster.style.backgroundImage = `url('${m.poster}')`;

        const tag = m.type === 'drama' ? ' (드라마)' : m.type === 'anime' ? ' (애니)' : ' (영화)';
        const title = document.createElement('div'); title.className='title'; title.textContent = m.title + tag;
        const sub = document.createElement('div'); sub.className='sub'; sub.innerHTML = `<span>${m.year}</span><span>★ ${m.rating}</span>`;

        card.appendChild(heart);
        card.appendChild(poster);
        card.appendChild(title);
        card.appendChild(sub);

        card.onclick = ()=>openModal(m);
        grid.appendChild(card);
      });
    }

    // 검색/필터 초기화
    function resetFilters(){
      state.q = '';
      state.type = 'all';
      state.genre = 'all';
      state.sort = 'default';
      state.showingFav = false;
      // UI에 반영
      qInput.value = '';
      typeSelect.value = 'all';
      genreSelect.value = 'all';
      sortSelect.value = 'default';
      document.getElementById('showFav').classList.remove('active');
      render();
    }

    // 모달
    function openModal(m){
      modalPoster.style.backgroundImage = `url('${m.poster}')`;
      modalTitle.textContent = m.title + (m.type==='drama' ? ' (드라마)' : m.type==='anime' ? ' (애니)' : ' (영화)');
      modalYear.textContent = m.year;
      modalGenre.textContent = m.genre.join(', ');
      modalRating.textContent = `★ ${m.rating} · 관객 ★ ${m.audienceStar || '-'} `;
      modalDesc.textContent = m.desc;
      criticsBox.textContent = m.critics || '';
      audienceBox.textContent = m.audience ? `${m.audience} (★ ${m.audienceStar})` : `관객 평점: ★ ${m.audienceStar || '-'}`;
      imdbLink.href = m.imdb || '#';

      streamBox.innerHTML = '';
      if(m.stream && m.stream.length){
        m.stream.forEach(s=>{
          const a = document.createElement('a'); a.href = s.url; a.target='_blank'; a.rel='noreferrer'; a.textContent = s.name; a.className=''; streamBox.appendChild(a);
        });
      } else { streamBox.textContent = '등록된 스트리밍 정보 없음'; }

      modalFav.textContent = state.favorites.includes(m.id)?'즐겨찾기 해제':'즐겨찾기 추가';
      modalFav.onclick = ()=>{ toggleFav(m.id); };

      modal.classList.add('open'); modal.setAttribute('aria-hidden','false');
    }

    // 닫기
    document.getElementById('closeModal').addEventListener('click', ()=>{ modal.classList.remove('open'); modal.setAttribute('aria-hidden','true'); });
    modal.addEventListener('click',(e)=>{ if(e.target===modal){ modal.classList.remove('open'); modal.setAttribute('aria-hidden','true'); } });

    // 즐겨찾기
    function toggleFav(id, heartEl){
      if(state.favorites.includes(id)) state.favorites = state.favorites.filter(x=>x!==id);
      else state.favorites.push(id);
      saveFavs();
      if(heartEl){ heartEl.textContent = state.favorites.includes(id)?'♥':'♡'; heartEl.classList.toggle('active', state.favorites.includes(id)); }
      render();
    }

    // 무작위
    function randomRecommend(){
      const list = filterAndSort(MOVIES);
      if(list.length===0){ alert('조건에 맞는 항목이 없습니다. 필터를 초기화하세요.'); return }
      const choice = list[Math.floor(Math.random()*list.length)]; openModal(choice);
    }

    // 즐겨찾기만 보기
    document.getElementById('showFav').addEventListener('click', ()=>{ state.showingFav = !state.showingFav; document.getElementById('showFav').classList.toggle('active', state.showingFav); render(); });

    // 바인딩
    qInput.addEventListener('input',(e)=>{ state.q = e.target.value; render(); });
    typeSelect.addEventListener('change',(e)=>{ state.type = e.target.value; render(); });
    genreSelect.addEventListener('change',(e)=>{ state.genre = e.target.value; render(); });
    sortSelect.addEventListener('change',(e)=>{ state.sort = e.target.value; render(); });
    document.getElementById('randomBtn').addEventListener('click', randomRecommend);
    document.getElementById('resetBtn').addEventListener('click', resetFilters);

    // init
    populateGenres(); loadFavs(); render();
  </script>
</body>
</html>
